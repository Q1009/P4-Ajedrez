{% extends "base.html.j2" %}

{% block title %}Liste des tournois{% endblock %}

{% block content %}
<h2>{{tournament.name}} : Joueurs</h2>

{% if tournament %}
<div class="table-card">
    <table class="info-table" aria-describedby="tournois-table">
        <thead>
            <tr>
                <th>ID Fédération</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody>
          {# Parcours tous les joueurs triés par nom et n'affiche que ceux inscrits au tournoi #}
            {% for player in players | sort(attribute='surname') %}
                {% if player.federation_chess_id in tournament.players %}
                    <tr>
                        <td>{{ player.federation_chess_id | default('—') }}</td>
                        <td>{{ player.surname | upper | default('—') }}</td>
                        <td>{{ player.name | default('—') }}</td>
                        <td>{{ tournament.players[player.federation_chess_id] | default('0') }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>

    <div class="table-footer">
        <div class="pager">
            {# pagination placeholder — adapter côté contrôleur si besoin #}
            {% if pagination %}
                {% if pagination.prev %}
                    <a class="page-btn" href="/tournament/previous.html">«</a>
                {% endif %}
                <span class="muted">Page {{ pagination.page }} / {{ pagination.pages }}</span>
                {% if pagination.next %}
                    <a class="page-btn" href="/tournament/next.html">»</a>
                {% endif %}
            {% endif %}
        </div>
        <div class="controls">
            <a class="btn" href="./tournaments.html">Retour</a>
        </div>
    </div>
</div>

{% else %}
    <div class="empty-state">
        <p>Aucun tournoi trouvé.</p>
        <p><a class="btn" href="./tournaments.html">Retour</a></p>
    </div>
{% endif %}
{% endblock %}